/*!
 * jQuery ClassyColor
 * vox.SPACE
 *
 * Written by Marius Stanciu - Sergiu <marius@vox.space>
 * Licensed under the MIT license https://vox.SPACE/LICENSE-MIT
 * Version 1.1.0
 *
 */ (function(e){function I(a,c,b){return Math.max(Math.min(a,b),c)}function v(a){return(255*a|0)+""}function w(a){return(100*a).toFixed(2)+"%"}function J(a,c,b){var d=b?c.split("").map(function(a){return p[a](K[a])}):c.split(""),f=c.indexOf(a),l=[],e=L[a];for(b=0;e>b;++b){var h=b/(e-1);d[f]=p[a](h);h=q?c+"("+d.join().toUpperCase()+")":'<stop stop-color="'+c+"("+d.join().toUpperCase()+')" offset="'+h+'"/>';l.push(h)}return l=l.join(q?",":""),function(c){var b=l,d;for(d in c)d===a||(b=b.replace(M[d],p[d](c[d])));
return q?"linear-gradient(to right, "+b+")":"url(data:image/svg+xml;base64,"+N('<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 1 1" preserveAspectRatio="none"><linearGradient id="the-gradient" gradientUnits="userSpaceOnUse" x1="0%" y1="0%" x2="100%" y2="0%">'+b+'</linearGradient><rect x="0" y="0" width="1" height="1" fill="url(#the-gradient)" /></svg>')+")"}}function x(a){function c(a,c,b){return 0>b&&(b+=1),1<b&&--b,1/6>b?a+6*(c-a)*b:.5>b?c:2/3>b?a+(c-a)*(2/3-b)*
6:a}if("r"in a)return a;var b,d,f;f=a.h;d=a.s;b=a.l;if(0===d)b=d=f=b;else{var l=.5>b?b*(1+d):b+d-b*d,e=2*b-l;b=c(e,l,f+1/3);d=c(e,l,f);f=c(e,l,f-1/3)}f={r:b,g:d,b:f};return"a"in a&&(f.a=a.a),f}function r(a){if("h"in a)return a;var c,b,d=a.r,f=a.g,e=a.b,m=Math.max(d,f,e);b=Math.min(d,f,e);var h=(m+b)/2;if(m===b)c=b=0;else{var g=m-b;switch(b=.5<h?g/(2-m-b):g/(m+b),m){case d:c=(f-e)/g+(e>f?6:0);break;case f:c=(e-d)/g+2;break;case e:c=(d-f)/g+4}c/=6}c={h:c,s:b,l:h};return"a"in a&&(c.a=a.a),c}function t(a,
c){var b,d={};if(a=a.toLowerCase(),!/^(rgb|hsl)a?$/i.test(a))throw'Color spaces must be any of the following: "rgb", "rgba", "hsl" or "hsla"';if("string"==typeof c)if(c=c.toLowerCase(),/^#[0-9a-f]{6}([0-9a-f]{2})?$/.test(c))for(4===a.length&&9!==c.length&&(c+="ff"),b=1;b<c.length;b+=2)d[a[(b-1)/2]]=parseInt(c.substr(b,2),16)/255;else{if(!/^(rgb|hsl)a?\([\d\s,.%]+\)$/.test(c))throw'Color strings must be hexadecimal (e.g. "#00ff00", or "#00ff00ff") or CSS style (e.g. rgba(0,255,0,1))';b=c.match(/(rgb|hsl)a?/)[0];
var f=c.match(/[\d.]+/g);/rgb/.test(b)?(d.r=f[0]/255,d.g=f[1]/255,d.b=f[2]/255):(d.h=f[0]/360,d.s=f[1]/100,d.l=f[2]/100);d.a=+f[3]}else{if(!e.isPlainObject(c))throw"Unrecognized color format.";b=Object.keys(c).sort().join("");if(!/^a?(bgr|hls)$/i.test(b))throw"Color objects must contain either r, g and b keys, or h, s and l keys. The a key is optional.";a.split("").sort().join("")!==b&&(c=/rgb/.test("space")?x(c):r(c));d=c}d=/rgb/.test(a)?x(d):r(d);isFinite(d.a)||(d.a=1);for(var l in d)if(0>d[l]||
1<d[l])throw"Color component out of range: "+l;this.getComponents=function(){return d};this.getComponent=function(a){return d[a]};this.setComponent=function(a,b){d[a]=b};this.getSpace=function(){return a}}function O(a,c){function b(a,b){return e("<div>").addClass(a).appendTo(b)}function d(a,b,c,d){c&&k.setComponent(c,d);for(a=0;a<r.length;++a)b=r[a],b.css({backgroundImage:b.data("template")(k.getComponents())}).find(".handle").css({left:100*k.getComponent(b.data("componentKey"))+"%"}),v.css({backgroundColor:k.toCssString()}),
g.displayColor&&p.text(q())}var f=this,l=a.attr("class"),m=a.children().detach(),h=a.text();a.addClass("ClassyColor").empty();var g=e.extend({color:a.css("color"),colorSpace:"rgba",expandEvent:"mousedown touchstart",collapseEvent:"",staticComponents:!1},c),k=new t(g.colorSpace,g.color);a.addClass("componentcount-"+k.getSpace().length).toggleClass("show-labels",!!g.labels);var p,q,n=b("maximize-wrapper",a),y=b("inner-maximize-wrapper",n),u=b("ui-wrapper",y),n=b("display-wrapper",u),v=b("display",n),
x=b("slider-container",u),r=e.map(k.getSpace().split(""),function(a){var c=b("slider "+a,x);return b("handle",c).attr("data-component",a),c.data({componentKey:a,template:J(a,k.getSpace(),g.staticComponents)}),c});if(g.displayColor){if(!/^(hex|css)$/.test(g.displayColor))throw'Invalid displayColor value, should be "hex" or "css"';p=b("output-wrapper",y);q={hex:k.toString,css:k.toCssString}[g.displayColor].bind(k,g.displayColorSpace||g.colorSpace)}a.on("newcolor",d);setTimeout(d.bind(null,void 0,this),
0);var z,D,E=function(b){e(b.target).closest(a).length||D()};z=function(){a.addClass("expanded").css({zIndex:999999});var b=0;y.children().each(function(){b+=e(this).outerHeight(!0)});y.css({width:u.width(),height:b});e(window).on(A,E);g.collapseEvent&&a.on(g.collapseEvent,D);a.off(g.expandEvent,z);var c=e(document).width(),d=e(document).height(),f=u.offset(),c=Math.min(0,c-f.left-u.outerWidth(!0)-10),d=Math.min(0,d-f.top-u.outerHeight(!0)-10);a.css("transform","translate("+c+"px, "+d+"px)")};D=function(){P?
a.off(G).one(G,function(){a.css({zIndex:""})}):a.css({zIndex:""});a.css({zIndex:999998});y.css({width:"",height:""});a.removeClass("expanded");e(window).off(A,E);g.expandEvent&&a.on(g.expandEvent,z);a.css("transform","")};g.expandEvent&&a.on(g.expandEvent,z);var C=function(a){var b=e(a.target);if(b.hasClass("slider")){var c=B?a.originalEvent.touches[0].clientX-e(a.target).offset().left:e.isNumeric(a.offsetX)?a.offsetX:a.clientX-e(a.target).offset().left;b.trigger("newcolor",[f,b.data("componentKey"),
I(c/b.outerWidth(),0,1)]);a.preventDefault();a.stopPropagation()}},w=function(){e(window).off(F,C)};this.destroy=function(){e(window).off(H,w);e(window).off(F,C);e(window).off(A,E);a.off().empty().removeData("ClassyColor").attr("class",l).html(m).text(h)};this.toString=function(){return k.toString.apply(k,arguments)};this.toCssString=function(){return k.toCssString.apply(k,arguments)};this.toObject=function(){return k.convertComponents.apply(k,arguments)};this.getColorSpace=function(){return k.getSpace()};
this.on=a.on.bind(a);this.off=a.off.bind(a);a.data("ClassyColor",this);return a.on(A,function(a){"mousedown"===a.type&&a.button!==Q||!e(a.target).hasClass("slider")||(C(a),e(window).on(F,C),e(window).one(H,w))})}var N=window.btoa||function(a){for(var c,b,d,f=[],e=-1,m=a.length,h=[0,0,0,0];++e<m;)c=a.charCodeAt(e),b=a.charCodeAt(++e),h[0]=c>>2,h[1]=(3&c)<<4|b>>4,isNaN(b)?h[2]=h[3]=64:(d=a.charCodeAt(++e),h[2]=(15&b)<<2|d>>6,h[3]=isNaN(d)?64:63&d),f.push(n.charAt(h[0]),n.charAt(h[1]),n.charAt(h[2]),
n.charAt(h[3]));return f.join("")},M={r:/R/g,g:/G/g,b:/B/g,h:/H/g,s:/S/g,l:/L/g,a:/A/g},p={r:v,g:v,b:v,h:function(a){return(360*a|0)+""},s:w,l:w,a:function(a){return a.toFixed(2)}},R=/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent),S=/MSIE [1-8]/.test(navigator.userAgent),q=!/MSIE 9.0/.test(navigator.userAgent),P=q,B="ontouchstart"in document.documentElement,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",K={r:0,g:0,b:0,h:0,s:1,l:.5,a:1},L={r:2,g:2,b:2,
h:7,s:2,l:3,a:2},Q=0,G=R?"webkitTransitionEnd":"transitionend",A=B?"touchstart":"mousedown",F=B?"touchmove":"mousemove",H=B?"touchend touchcancel":"mouseup";t.prototype.convertComponents=function(a){a=a||this.getSpace();var c=e.extend({},this.getComponents());if((new RegExp(a)).test(this.getSpace()))return 3===a.length&&delete c.a,c;if(c=/rgb/.test(a)?x(c):r(c),/a/.test(a))a=this.getComponent("a"),c.a="undefined"==typeof a?1:a;return c};t.prototype.componentsToString=function(a,c){for(var b="#",d=
0;d<c.length;++d)var e=Math.floor(255*a[c[d]]).toString(16),b=b+((1===e.length?"0":"")+e);return b};t.prototype.toString=function(a){return a=a||this.getSpace(),this.componentsToString(this.convertComponents(a),a)};t.prototype.componentsToCssValuesString=function(a,c){for(var b=[],d=0;d<c.length;++d){var e=c[d];b.push(p[e](a[e]))}return b.join(", ")};t.prototype.toCssString=function(a){return a=a||this.getSpace(),a+"("+this.componentsToCssValuesString(this.convertComponents(a),a)+")"};e.fn.ClassyColor=
function(a){if(S)throw"Unfortunately, ClassyColor does not work on your browser.";var c=this.eq(0);if(!c.length)throw"No element matched";return c.data("ClassyColor")||new O(c,a)}})(jQuery);